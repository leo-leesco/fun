<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>SystemFLemmas.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-windowed"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> MyTactics.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Sequences.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> LambdaCalculusSyntax.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> LambdaCalculusValues.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> LambdaCalculusReduction.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> SystemFDefinition.</span></span></pre><div class="section" id="a-size-indexed-typing-judgement-for-terms">
<h1>A size-indexed typing judgement for terms</h1>
<p>This typing judgement is indexed with an integer <code class="highlight coq"><span class="n">n</span></code> which counts the
number of <em>outstanding</em> type abstractions and type applications, that
is, the number of type abstractions and type applications that are not
buried under a syntax-directed typing rule.</p>
<p>This integer index is used in the proof of the type substitution lemma
<code class="highlight coq"><span class="n">jtn_ty_substitution</span></code>, where we prove that <code class="highlight coq"><span class="n">n</span></code> is preserved, and in
the proof of the inversion lemma <code class="highlight coq"><span class="n">invert_jtn_Lam_TyFun</span></code>, which is
carried out by induction over <code class="highlight coq"><span class="n">n</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">jtn</span> : nat -&gt; tyenv -&gt; term -&gt; ty -&gt; <span class="kt">Prop</span> :=
| JTNVar:
    <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">x</span> <span class="nv">T</span>,
    Gamma x = T -&gt;
    jtn <span class="mi">0</span> Gamma (Var x) T
| JTNLam:
    <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span>,
    jtn n (T .: Gamma) t U -&gt;
    jtn <span class="mi">0</span> Gamma (Lam t) (TyFun T U)
| JTNApp:
    <span class="kr">forall</span> <span class="nv">n1</span> <span class="nv">n2</span> <span class="nv">Gamma</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">T</span> <span class="nv">U</span>,
    jtn n1 Gamma t1 (TyFun T U) -&gt;
    jtn n2 Gamma t2 T -&gt;
    jtn <span class="mi">0</span> Gamma (App t1 t2) U
| JTNTyAbs:
    <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">Gamma&#39;</span> <span class="nv">t</span> <span class="nv">T</span>,
    jtn n Gamma&#39; t T -&gt;
    Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) -&gt;
    jtn (S n) Gamma t (TyAll T)
| JTNTyApp:
    <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span> <span class="nv">T&#39;</span>,
    jtn n Gamma t (TyAll T) -&gt;
    T&#39; = T.[U/] -&gt;
    jtn (S n) Gamma t T&#39;
.</span></span></pre><p>The following hint allows <code class="highlight coq"><span class="nb">eauto with</span> <span class="n">jtn</span></code> to apply the above typing rules.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Hint Constructors</span> jtn : jtn.</span></span></pre></div>
<div class="section" id="equivalence-between-the-typing-judgements">
<h1>Equivalence between the typing judgements</h1>
<p>It is convenient to define a simpler typing judgement which is not indexed
with an integer <code class="highlight coq"><span class="n">n</span></code>. We use this judgement when we do not care about <code class="highlight coq"><span class="n">n</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">jt</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> :=
  <span class="kr">exists</span> <span class="nv">n</span>,
  jtn n Gamma t T.</span></span></pre><p>The following hint allows <code class="highlight coq"><span class="nb">eauto with</span> <span class="n">jt</span></code> to exploit the fact that
<code class="highlight coq"><span class="n">j</span> <span class="n">n</span> <span class="n">Gamma</span> <span class="n">t</span> <span class="n">T</span></code> implies <code class="highlight coq"><span class="n">jt</span> <span class="n">Gamma</span> <span class="n">t</span> <span class="n">T</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Hint Unfold</span> jt : jt.</span></span></pre><p>It is convenient to reformulate the typing rules at the level of <code class="highlight coq"><span class="n">jt</span></code>.
This is somewhat redundant, but nothing complicated is going on here.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk0"><span class="kn">Lemma</span> <span class="nf">JTVar</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">x</span> <span class="nv">T</span>,
  Gamma x = T -&gt;
  jt Gamma (Var x) T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">x</span> : var) (<span class="nv">T</span> : ty),
Gamma x = T -&gt; jt Gamma (Var x) T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">x</span> : var) (<span class="nv">T</span> : ty),
Gamma x = T -&gt; jt Gamma (Var x) T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk2"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">x</span> : var) (<span class="nv">T</span> : ty),
Gamma x = T -&gt; <span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Var x) T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Gamma x = T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Var x) T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Var x) (Gamma x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5"><span class="kn">Lemma</span> <span class="nf">JTLam</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span>,
  jt (T .: Gamma) t U -&gt;
  jt Gamma (Lam t) (TyFun T U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jt (T .: Gamma) t U -&gt; jt Gamma (Lam t) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jt (T .: Gamma) t U -&gt; jt Gamma (Lam t) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk7"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n (T .: Gamma) t U) -&gt;
<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Lam t) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n (T .: Gamma) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Lam t) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn x (T .: Gamma) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (Lam t) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka"><span class="kn">Lemma</span> <span class="nf">JTApp</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">T</span> <span class="nv">U</span>,
  jt Gamma t1 (TyFun T U) -&gt;
  jt Gamma t2 T -&gt;
  jt Gamma (App t1 t2) U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t1</span> <span class="nv">t2</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jt Gamma t1 (TyFun T U) -&gt;
jt Gamma t2 T -&gt; jt Gamma (App t1 t2) U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t1</span> <span class="nv">t2</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jt Gamma t1 (TyFun T U) -&gt;
jt Gamma t2 T -&gt; jt Gamma (App t1 t2) U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkc"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t1</span> <span class="nv">t2</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t1 (TyFun T U)) -&gt;
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t2 T) -&gt;
<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (App t1 t2) U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkd"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t2 T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (App t1 t2) U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chke">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn x0 Gamma t1 (TyFun T U)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t2 T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma (App t1 t2) U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkf"><span class="kn">Lemma</span> <span class="nf">JTTyAbs</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">Gamma&#39;</span> <span class="nv">t</span> <span class="nv">T</span>,
  jt Gamma&#39; t T -&gt;
  Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) -&gt;
  jt Gamma t (TyAll T).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">Gamma&#39;</span> : tyenv) (<span class="nv">t</span> : term)
  (<span class="nv">T</span> : ty),
jt Gamma&#39; t T -&gt;
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) -&gt; jt Gamma t (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">Gamma&#39;</span> : tyenv) (<span class="nv">t</span> : term)
  (<span class="nv">T</span> : ty),
jt Gamma&#39; t T -&gt;
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) -&gt; jt Gamma t (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk11"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">Gamma&#39;</span> : tyenv) (<span class="nv">t</span> : term)
  (<span class="nv">T</span> : ty),
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma&#39; t T) -&gt;
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) -&gt;
<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk12"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma&#39; t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk13">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn x (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk14"><span class="kn">Lemma</span> <span class="nf">JTTyApp</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span> <span class="nv">T&#39;</span>,
  jt Gamma t (TyAll T) -&gt;
  T&#39; = T.[U/] -&gt;
  jt Gamma t T&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> <span class="nv">T&#39;</span> : {bind ty}),
jt Gamma t (TyAll T) -&gt; T&#39; = T.[U/] -&gt; jt Gamma t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk15"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> <span class="nv">T&#39;</span> : {bind ty}),
jt Gamma t (TyAll T) -&gt; T&#39; = T.[U/] -&gt; jt Gamma t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk16"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> <span class="nv">T&#39;</span> : {bind ty}),
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t (TyAll T)) -&gt;
T&#39; = T.[U/] -&gt; <span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk17"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U, T'</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t (TyAll T)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>T&#39; = T.[U/]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk18">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>The following hint allows <code class="highlight coq"><span class="nb">eauto with</span> <span class="n">jt</span></code> to use the above lemmas.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Hint Resolve</span> JTVar JTLam JTApp JTTyAbs JTTyApp : jt.</span></span></pre><p>The judgements <code class="highlight coq"><span class="n">jt</span></code> and <code class="highlight coq"><span class="n">jf</span></code> are equivalent. So, we have just given an
alternate definition of System F.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk19"><span class="kn">Lemma</span> <span class="nf">jtn_jf</span>:
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span>,
  jtn n Gamma t T -&gt;
  jf Gamma t T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jtn n Gamma t T -&gt; jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jtn n Gamma t T -&gt; jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>; <span class="nb">eauto with</span> jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1b"><span class="kn">Lemma</span> <span class="nf">jt_jf</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span>,
  jt Gamma t T -&gt;
  jf Gamma t T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jt Gamma t T -&gt; jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jt Gamma t T -&gt; jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1d"><span class="nb">unfold</span> jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
(<span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T) -&gt; jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk1f">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn_jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk20"><span class="kn">Lemma</span> <span class="nf">jf_jt</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span>,
  jf Gamma t T -&gt;
  jt Gamma t T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jf Gamma t T -&gt; jt Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk21"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jf Gamma t T -&gt; jt Gamma t T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>; <span class="nb">eauto with</span> jt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="substitutions-of-types-for-type-variables">
<h1>Substitutions of types for type variables</h1>
<p>The typing judgement <code class="highlight coq"><span class="n">jtn</span></code> is preserved by a type substitution <code class="highlight coq"><span class="n">theta</span></code>,
which maps type variables to types.</p>
<p>We prove that the measure <code class="highlight coq"><span class="n">n</span></code> is preserved by such a substitution.
This is required in the proof of <code class="highlight coq"><span class="n">invert_jtn_Lam_TyFun</span></code>, where we
apply a substitution to the type derivation before exploiting the
induction hypothesis.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk22"><span class="kn">Lemma</span> <span class="nf">jtn_ty_substitution</span>:
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span>,
  jtn n Gamma t T -&gt;
  <span class="kr">forall</span> <span class="nv">Gamma&#39;</span> <span class="nv">T&#39;</span> <span class="nv">theta</span>,
  Gamma&#39; = Gamma &gt;&gt; theta -&gt;
  T&#39; = T.[theta] -&gt;
  jtn n Gamma&#39; t T&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jtn n Gamma t T -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">T&#39;</span> : ty)
  (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk23"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jtn n Gamma t T -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">T&#39;</span> : ty)
  (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* A detailed proof, where every case is dealt with explicitly: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk24"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (Var x) (Gamma x).[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk25" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk25"><hr></label><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (Lam t) (TyFun T U).[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk26" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk26"><hr></label><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (App t1 t2) U.[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk27"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t (TyAll T).[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk28"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JTNVar *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk29">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (Var x) (Gamma x).[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk2a"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Gamma &gt;&gt; theta) x = (Gamma x).[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk2b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (Lam t) (TyFun T U).[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk2c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk2c"><hr></label><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (App t1 t2) U.[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk2d"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t (TyAll T).[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk2e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk2e"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JTNLam *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk2f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (Lam t) (TyFun T U).[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk30"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="nl">?n</span> (T.[theta] .: Gamma &gt;&gt; theta) t U.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk31"><span class="nb">eapply</span> IHjtn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">T.[theta] .: Gamma &gt;&gt; theta = T .: Gamma &gt;&gt; <span class="nl">?theta</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk32" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk32"><hr></label><div class="goal-conclusion">U.[theta] = U.[<span class="nl">?theta</span>]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk33"><span class="nb">eauto with</span> autosubst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (T .: Gamma) t U</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = T .: Gamma &gt;&gt; theta -&gt;
T&#39; = U.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">U.[theta] = U.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk34">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (App t1 t2) U.[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk35"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t (TyAll T).[theta]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk36" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk36"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JTNApp *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk37">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="mi">0</span> (Gamma &gt;&gt; theta) (App t1 t2) U.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk38"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="nl">?n1</span> (Gamma &gt;&gt; theta) t1 (TyFun <span class="nl">?T</span> U.[theta])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk39" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk39"><hr></label><div class="goal-conclusion">jtn <span class="nl">?n2</span> (Gamma &gt;&gt; theta) t2 <span class="nl">?T</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk3a"><span class="nb">eapply</span> IHjtn1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma &gt;&gt; theta = Gamma &gt;&gt; <span class="nl">?theta</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk3b"><hr></label><div class="goal-conclusion">TyFun <span class="nl">?T</span> U.[theta] = (TyFun T U).[<span class="nl">?theta</span>]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk3c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk3c"><hr></label><div class="goal-conclusion">jtn <span class="nl">?n2</span> (Gamma &gt;&gt; theta) t2 <span class="nl">?T</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk3d"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TyFun <span class="nl">?T</span> U.[theta] = (TyFun T U).[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk3e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk3e"><hr></label><div class="goal-conclusion">jtn <span class="nl">?n2</span> (Gamma &gt;&gt; theta) t2 <span class="nl">?T</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk3f">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TyFun <span class="nl">?T</span> U.[theta] = TyFun T.[theta] U.[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk40" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk40"><hr></label><div class="goal-conclusion">jtn <span class="nl">?n2</span> (Gamma &gt;&gt; theta) t2 <span class="nl">?T</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk41"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n1 Gamma t1 (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn n2 Gamma t2 T</span></span></span><br><span><var>IHjtn1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyFun T U).[theta] -&gt;
jtn n1 Gamma&#39; t1 T&#39;</span></span></span><br><span><var>IHjtn2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n2 Gamma&#39; t2 T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn <span class="nl">?n2</span> (Gamma &gt;&gt; theta) t2 T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk42">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t (TyAll T).[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk43" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk43"><hr></label><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JTNTyAbs *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk44">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t (TyAll T).[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk45"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn n <span class="nl">?Gamma&#39;</span> t T.[up theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk46"><hr></label><div class="goal-conclusion"><span class="nl">?Gamma&#39;</span> = Gamma &gt;&gt; theta &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk47"><span class="nb">eapply</span> IHjtn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nl">?Gamma&#39;</span> = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; <span class="nl">?theta</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk48" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk48"><hr></label><div class="goal-conclusion">T.[up theta] = T.[<span class="nl">?theta</span>]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk49" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk49"><hr></label><div class="goal-conclusion"><span class="nl">?Gamma&#39;</span> = Gamma &gt;&gt; theta &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4a"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">T.[up theta] = T.[<span class="nl">?theta</span>]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk4b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk4b"><hr></label><div class="goal-conclusion">Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; <span class="nl">?theta</span> =
Gamma &gt;&gt; theta &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4c"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; up theta =
Gamma &gt;&gt; theta &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JTNTyApp *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn (S n) (Gamma &gt;&gt; theta) t T.[U/].[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk4f"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn n (Gamma &gt;&gt; theta) t (TyAll <span class="nl">?T</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk50" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk50"><hr></label><div class="goal-conclusion">T.[U/].[theta] = <span class="nl">?T</span>.[<span class="nl">?U</span>/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk51"><span class="nb">eapply</span> IHjtn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma &gt;&gt; theta = Gamma &gt;&gt; <span class="nl">?theta</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk52" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk52"><hr></label><div class="goal-conclusion">TyAll <span class="nl">?T</span> = (TyAll T).[<span class="nl">?theta</span>]</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk53"><hr></label><div class="goal-conclusion">T.[U/].[theta] = <span class="nl">?T</span>.[<span class="nl">?U</span>/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk54"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TyAll <span class="nl">?T</span> = (TyAll T).[theta]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk55"><hr></label><div class="goal-conclusion">T.[U/].[theta] = <span class="nl">?T</span>.[<span class="nl">?U</span>/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk56">autosubst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n Gamma t (TyAll T)</span></span></span><br><span><var>IHjtn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) 
  (<span class="nv">T&#39;</span> : ty) (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = (TyAll T).[theta] -&gt; jtn n Gamma&#39; t T&#39;</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">T.[U/].[theta] = T.[up theta].[<span class="nl">?U</span>/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk57"><span class="kn">Restart</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty),
jtn n Gamma t T -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">T&#39;</span> : ty)
  (<span class="nv">theta</span> : var -&gt; ty),
Gamma&#39; = Gamma &gt;&gt; theta -&gt;
T&#39; = T.[theta] -&gt; jtn n Gamma&#39; t T&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* A shorter script, where all cases are dealt with uniformly: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>;
  <span class="nb">econstructor</span>; <span class="nb">eauto with</span> autosubst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>As a corollary, if the term <code class="highlight coq"><span class="n">t</span></code> has type <code class="highlight coq"><span class="n">T</span></code>
under a type environment that extends <code class="highlight coq"><span class="n">Gamma</span></code> with one type variable,
then for every type <code class="highlight coq"><span class="n">U</span></code>,
the term <code class="highlight coq"><span class="n">t</span></code> has type <code class="highlight coq"><span class="n">T</span><span class="o">.[</span><span class="n">U</span><span class="o">/]</span></code> under <code class="highlight coq"><span class="n">Gamma</span></code>.</p>
<p>Again, the measure <code class="highlight coq"><span class="n">n</span></code> is preserved by this substitution.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk58"><span class="kn">Lemma</span> <span class="nf">jtn_ty_substitution_0</span>:
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span>,
  jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt;
  jtn n Gamma t T.[U/].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term)
  (<span class="nv">T</span> <span class="nv">U</span> : ty),
jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt; jtn n Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk59"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term)
  (<span class="nv">T</span> <span class="nv">U</span> : ty),
jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt; jtn n Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jtn n Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5b"><span class="nb">eapply</span> jtn_ty_substitution; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma = Gamma &gt;&gt; ren (+<span class="mi">1</span>) &gt;&gt; U .: ids</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>As a corollary, the same properties hold of the judgement <code class="highlight coq"><span class="n">jf</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5c"><span class="kn">Lemma</span> <span class="nf">jf_ty_substitution</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">theta</span>,
  jf Gamma t T -&gt;
  jf (Gamma &gt;&gt; theta) t T.[theta].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty)
  (<span class="nv">theta</span> : var -&gt; ty),
jf Gamma t T -&gt; jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> : ty)
  (<span class="nv">theta</span> : var -&gt; ty),
jf Gamma t T -&gt; jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk5f">forward jf_jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jt Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk60"><span class="nb">unfold</span> jt <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk61">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk62">forward jtn_ty_substitution.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>theta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>jtn x (Gamma &gt;&gt; <span class="nl">?Goal</span>) t T.[<span class="nl">?Goal</span>]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (Gamma &gt;&gt; theta) t T.[theta]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn_jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk63"><span class="kn">Lemma</span> <span class="nf">jf_ty_substitution_0</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span>,
  jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt;
  jf Gamma t T.[U/].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt; jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk64"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T -&gt; jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk65"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk66">forward jf_jt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jt (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk67"><span class="nb">unfold</span> jt <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat, jtn n (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk68">unpack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn x (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk69">forward jtn_ty_substitution_0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jtn x (Gamma &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>jtn x Gamma t T.[<span class="nl">?Goal</span>/]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma t T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jtn_jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="renamings-of-term-variables">
<h1>Renamings of term variables</h1>
<p>The typing judgement is preserved by a renaming <code class="highlight coq"><span class="n">xi</span></code> that maps
term variables to term variables. Note that <code class="highlight coq"><span class="n">xi</span></code> need not be
injective.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk6a"><span class="kn">Lemma</span> <span class="nf">jf_te_renaming</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">U</span>,
  jf Gamma t U -&gt;
  <span class="kr">forall</span> <span class="nv">Gamma&#39;</span> <span class="nv">xi</span>,
  Gamma = xi &gt;&gt;&gt; Gamma&#39; -&gt;
  jf Gamma&#39; t.[ren xi] U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">U</span> : ty),
jf Gamma t U -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi</span> : var -&gt; var),
Gamma = xi &gt;&gt;&gt; Gamma&#39; -&gt; jf Gamma&#39; t.[ren xi] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk6b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">U</span> : ty),
jf Gamma t U -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi</span> : var -&gt; var),
Gamma = xi &gt;&gt;&gt; Gamma&#39; -&gt; jf Gamma&#39; t.[ren xi] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* A detailed proof, where every case is dealt with explicitly: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk6c"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (Var x).[ren xi] ((xi &gt;&gt;&gt; Gamma&#39;) x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk6d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk6d"><hr></label><div class="goal-conclusion">jf Gamma&#39; (Lam t).[ren xi] (TyFun T U)</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk6e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk6e"><hr></label><div class="goal-conclusion">jf Gamma&#39; (App t1 t2).[ren xi] U</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk6f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk6f"><hr></label><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk70" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk70"><hr></label><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JFVar *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk71">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (Var x).[ren xi] ((xi &gt;&gt;&gt; Gamma&#39;) x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk72">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (ids (xi x)) (Gamma&#39; (xi x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk73"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>var</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma&#39; (xi x) = Gamma&#39; (xi x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk74">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (Lam t).[ren xi] (TyFun T U)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk75" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk75"><hr></label><div class="goal-conclusion">jf Gamma&#39; (App t1 t2).[ren xi] U</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk76" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk76"><hr></label><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk77" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk77"><hr></label><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JFLam *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk78">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (Lam t).[ren xi] (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk79">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (Lam t.[ren (upren xi)]) (TyFun T U)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk7a"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma&#39;) t.[ren (upren xi)] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk7b"><span class="nb">eapply</span> IHjf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
T .: xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (T .: xi &gt;&gt;&gt; Gamma&#39;) t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">T .: xi &gt;&gt;&gt; Gamma&#39; = upren xi &gt;&gt;&gt; T .: Gamma&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk7c">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (App t1 t2).[ren xi] U</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk7d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk7d"><hr></label><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk7e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk7e"><hr></label><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JFApp *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk7f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (App t1 t2).[ren xi] U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk80">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; (App t1.[ren xi] t2.[ren xi]) U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk81"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t1.[ren xi] (TyFun <span class="nl">?T</span> U)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk82" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk82"><hr></label><div class="goal-conclusion">jf Gamma&#39; t2.[ren xi] <span class="nl">?T</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk83"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t2.[ren xi0] T</span></span></span><br><span><var>IHjf1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty)
  (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t1.[ren xi0] (TyFun T U)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t2 T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t1 (TyFun T U)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t2.[ren xi] T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk84">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk85" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk85"><hr></label><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JFTyAbs *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk86">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk87">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39;0 t.[ren xi] (TyAll T)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk88"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf <span class="nl">?Gamma&#39;</span> t.[ren xi] T</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk89" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk89"><hr></label><div class="goal-conclusion"><span class="nl">?Gamma&#39;</span> = Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8a"><span class="nb">eapply</span> IHjf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi &gt;&gt;&gt; <span class="nl">?Gamma&#39;</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk8b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk8b"><hr></label><div class="goal-conclusion"><span class="nl">?Gamma&#39;</span> = Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8c">autosubst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Gamma'0</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>) = xi0 &gt;&gt;&gt; Gamma&#39; -&gt;
jf Gamma&#39; t.[ren xi0] T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)) t T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma&#39;0 &gt;&gt;&gt; <span class="nb">subst</span> ((+<span class="mi">1</span>) &gt;&gt;&gt; ids) = Gamma&#39;0 &gt;&gt; ren (+<span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* JFTyApp *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk8f">asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] T.[U/]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk90"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf Gamma&#39; t.[ren xi] (TyAll <span class="nl">?T</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk91" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk91"><hr></label><div class="goal-conclusion">T.[U/] = <span class="nl">?T</span>.[<span class="nl">?U</span>/]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk92"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>{bind ty}</span></span></span><br><span><var>Gamma'</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>xi</var><span class="hyp-type"><b>: </b><span>var -&gt; var</span></span></span><br><span><var>IHjf</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">Gamma&#39;0</span> : var -&gt; ty) (<span class="nv">xi0</span> : var -&gt; var),
xi &gt;&gt;&gt; Gamma&#39; = xi0 &gt;&gt;&gt; Gamma&#39;0 -&gt;
jf Gamma&#39;0 t.[ren xi0] (TyAll T)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf (xi &gt;&gt;&gt; Gamma&#39;) t (TyAll T)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">T.[U/] = T.[<span class="nl">?U</span>/]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk93"><span class="kn">Restart</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">U</span> : ty),
jf Gamma t U -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma&#39;</span> : var -&gt; ty) (<span class="nv">xi</span> : var -&gt; var),
Gamma = xi &gt;&gt;&gt; Gamma&#39; -&gt; jf Gamma&#39; t.[ren xi] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* A shorter script, where all cases are dealt with uniformly: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>;
  asimpl; <span class="nb">econstructor</span>; <span class="nb">eauto with</span> autosubst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>As a corollary, <code class="highlight coq"><span class="n">jf</span></code> is preserved by the renaming <code class="highlight coq"><span class="o">(+</span><span class="mi">1</span><span class="o">)</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk94"><span class="kn">Lemma</span> <span class="nf">jf_te_renaming_0</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">T</span> <span class="nv">U</span>,
  jf Gamma t U -&gt;
  jf (T .: Gamma) (lift <span class="mi">1</span> t) U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf Gamma t U -&gt; jf (T .: Gamma) (lift <span class="mi">1</span> t) U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk95"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf Gamma t U -&gt; jf (T .: Gamma) (lift <span class="mi">1</span> t) U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk96"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma) (lift <span class="mi">1</span> t) U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk97"><span class="nb">eapply</span> jf_te_renaming.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf <span class="nl">?Gamma</span> t U</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chk98" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t U</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chk98"><hr></label><div class="goal-conclusion"><span class="nl">?Gamma</span> = (+<span class="mi">1</span>) &gt;&gt;&gt; T .: Gamma</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk99"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>T, U</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t U</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Gamma = (+<span class="mi">1</span>) &gt;&gt;&gt; T .: Gamma</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">autosubst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="substitutions-of-terms-for-term-variables">
<h1>Substitutions of terms for term variables</h1>
<p>The typing judgement is extended to substitutions.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">js</span> <span class="nv">Gamma</span> <span class="nv">sigma</span> <span class="nv">Delta</span> :=
  <span class="kr">forall</span> <span class="nv">x</span> : var,
  jf Gamma (sigma x) (Delta x).</span></span></pre><p>The following are basic lemmas about <code class="highlight coq"><span class="n">js</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9a"><span class="kn">Lemma</span> <span class="nf">js_ids</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span>,
  js Gamma ids Gamma.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Gamma</span> : tyenv, js Gamma ids Gamma</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Gamma</span> : tyenv, js Gamma ids Gamma</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9c"><span class="nb">unfold</span> js.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">x</span> : var),
jf Gamma (ids x) (Gamma x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto with</span> jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9d"><span class="kn">Lemma</span> <span class="nf">js_cons</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t</span> <span class="nv">sigma</span> <span class="nv">T</span> <span class="nv">Delta</span>,
  jf Gamma t T -&gt;
  js Gamma sigma Delta -&gt;
  js Gamma (t .: sigma) (T .: Delta).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term)
  (<span class="nv">sigma</span> : var -&gt; term) (<span class="nv">T</span> : ty) (<span class="nv">Delta</span> : var -&gt; ty),
jf Gamma t T -&gt;
js Gamma sigma Delta -&gt;
js Gamma (t .: sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">t</span> : term)
  (<span class="nv">sigma</span> : var -&gt; term) (<span class="nv">T</span> : ty) (<span class="nv">Delta</span> : var -&gt; ty),
jf Gamma t T -&gt;
js Gamma sigma Delta -&gt;
js Gamma (t .: sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chk9f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>jf Gamma t T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">js Gamma (t .: sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [|x]; asimpl; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka0"><span class="kn">Lemma</span> <span class="nf">js_up</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">sigma</span> <span class="nv">Delta</span> <span class="nv">T</span>,
  js Gamma sigma Delta -&gt;
  js (T .: Gamma) (up sigma) (T .: Delta).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term)
  (<span class="nv">Delta</span> : var -&gt; ty) (<span class="nv">T</span> : ty),
js Gamma sigma Delta -&gt;
js (T .: Gamma) (up sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term)
  (<span class="nv">Delta</span> : var -&gt; ty) (<span class="nv">T</span> : ty),
js Gamma sigma Delta -&gt;
js (T .: Gamma) (up sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">js (T .: Gamma) (up sigma) (T .: Delta)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka3"><span class="nb">intros</span> [|x]; asimpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma) (ids <span class="mi">0</span>) T</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="systemflemmas-v-chka4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="systemflemmas-v-chka4"><hr></label><div class="goal-conclusion">jf (T .: Gamma) (lift <span class="mi">1</span> (sigma x)) (Delta x)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka5">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma) (ids <span class="mi">0</span>) T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto with</span> jf.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka6">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma) (lift <span class="mi">1</span> (sigma x)) (Delta x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka7">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Gamma</var><span class="hyp-type"><b>: </b><span>tyenv</span></span></span><br><span><var>sigma</var><span class="hyp-type"><b>: </b><span>var -&gt; term</span></span></span><br><span><var>Delta</var><span class="hyp-type"><b>: </b><span>var -&gt; ty</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>ty</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>js Gamma sigma Delta</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jf (T .: Gamma) (lift <span class="mi">1</span> (sigma x)) (Delta x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jf_te_renaming_0.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>In the following statement, <code class="highlight coq"><span class="n">theta</span></code> is a substitution of types for
type variables. It is post-composed with the type environments
<code class="highlight coq"><span class="n">Gamma</span></code> and <code class="highlight coq"><span class="n">Delta</span></code>.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka8"><span class="kn">Lemma</span> <span class="nf">js_ty_substitution</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">sigma</span> <span class="nv">Delta</span> <span class="nv">theta</span>,
  js Gamma sigma Delta -&gt;
  js (Gamma &gt;&gt; theta) sigma (Delta &gt;&gt; theta).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term)
  (<span class="nv">Delta</span> <span class="nv">theta</span> : var -&gt; ty),
js Gamma sigma Delta -&gt;
js (Gamma &gt;&gt; theta) sigma (Delta &gt;&gt; theta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chka9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term)
  (<span class="nv">Delta</span> <span class="nv">theta</span> : var -&gt; ty),
js Gamma sigma Delta -&gt;
js (Gamma &gt;&gt; theta) sigma (Delta &gt;&gt; theta)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkaa"><span class="nb">unfold</span> js.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term)
  (<span class="nv">Delta</span> <span class="nv">theta</span> : var -&gt; ty),
(<span class="kr">forall</span> <span class="nv">x</span> : var, jf Gamma (sigma x) (Delta x)) -&gt;
<span class="kr">forall</span> <span class="nv">x</span> : var,
jf (Gamma &gt;&gt; theta) (sigma x) ((Delta &gt;&gt; theta) x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jf_ty_substitution.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>The typing judgement is preserved by a well-typed substitution <code class="highlight coq"><span class="n">sigma</span></code>
of (all) term variables to terms.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkab"><span class="kn">Lemma</span> <span class="nf">jf_te_substitution</span>:
  <span class="kr">forall</span> <span class="nv">Delta</span> <span class="nv">t</span> <span class="nv">U</span>,
  jf Delta t U -&gt;
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">sigma</span>,
  js Gamma sigma Delta -&gt;
  jf Gamma t.[sigma] U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Delta</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">U</span> : ty),
jf Delta t U -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term),
js Gamma sigma Delta -&gt; jf Gamma t.[sigma] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkac"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Delta</span> : tyenv) (<span class="nv">t</span> : term) (<span class="nv">U</span> : ty),
jf Delta t U -&gt;
<span class="kr">forall</span> (<span class="nv">Gamma</span> : tyenv) (<span class="nv">sigma</span> : var -&gt; term),
js Gamma sigma Delta -&gt; jf Gamma t.[sigma] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span>; <span class="nb">subst</span>; asimpl;
  <span class="nb">eauto using</span> js_up, js_ty_substitution <span class="kr">with</span> jf.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>As a corollary, the typing judgement is preserved by a well-typed
substitution of one term for one variable, namely variable 0.</p>
<p>This property is exploited in the proof of subject reduction, in the
case of beta-reduction.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkad"><span class="kn">Lemma</span> <span class="nf">jf_te_substitution_0</span>:
  <span class="kr">forall</span> <span class="nv">Gamma</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">T</span> <span class="nv">U</span>,
  jf (T .: Gamma) t1 U -&gt;
  jf Gamma t2 T -&gt;
  jf Gamma t1.[t2/] U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t1</span> <span class="nv">t2</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf (T .: Gamma) t1 U -&gt;
jf Gamma t2 T -&gt; jf Gamma t1.[t2/] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="systemflemmas-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="systemflemmas-v-chkae"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Gamma</span> : var -&gt; ty) (<span class="nv">t1</span> <span class="nv">t2</span> : term) (<span class="nv">T</span> <span class="nv">U</span> : ty),
jf (T .: Gamma) t1 U -&gt;
jf Gamma t2 T -&gt; jf Gamma t1.[t2/] U</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> jf_te_substitution, js_ids, js_cons.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
</div>
</div></body>
</html>
